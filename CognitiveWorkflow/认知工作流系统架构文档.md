# è®¤çŸ¥å·¥ä½œæµç³»ç»Ÿæ¶æ„æ–‡æ¡£

## 1. ç³»ç»Ÿæ¦‚è¿°

### 1.1 ç³»ç»Ÿç®€ä»‹
è®¤çŸ¥å·¥ä½œæµç³»ç»Ÿï¼ˆCognitiveWorkflowï¼‰æ˜¯ä¸€ä¸ªåŸºäºè®¤çŸ¥ç†è®ºçš„æ™ºèƒ½ä»»åŠ¡ç®¡ç†å’Œæ‰§è¡Œæ¡†æ¶ï¼Œç»è¿‡é‡å¤§æ¶æ„å‡çº§ï¼Œç°åŒ…å«ä¸¤ä¸ªæ ¸å¿ƒå­ç³»ç»Ÿï¼š

1. **ä¼ ç»Ÿè®¤çŸ¥å·¥ä½œæµ** (cognitive_workflow.py, 1593è¡Œä»£ç )
   - åŸºäºè§„åˆ’è€…-å†³ç­–è€…-æ‰§è¡Œè€…ä¸‰è§’è‰²åˆ†ç¦»çš„åŠ¨æ€å¯¼èˆªç³»ç»Ÿ
   - æ”¯æŒä»»åŠ¡å…ˆå†³æ¡ä»¶æ™ºèƒ½æ£€æŸ¥å’ŒåŠ¨æ€è®¡åˆ’ä¿®æ­£
   - é€‚ç”¨äºçº¿æ€§ä»»åŠ¡æµç¨‹å’Œé¡¹ç›®ç®¡ç†åœºæ™¯

2. **äº§ç”Ÿå¼è§„åˆ™å¼•æ“** (cognitive_workflow_rule_base/, 6750è¡Œä»£ç )
   - åŸºäºIF-THENè‡ªç„¶è¯­è¨€è§„åˆ™çš„å›¾çµå®Œå¤‡å·¥ä½œæµç³»ç»Ÿ
   - é‡‡ç”¨é¢†åŸŸé©±åŠ¨è®¾è®¡(DDD)æ¶æ„ï¼Œæ”¯æŒå¤æ‚ä¸šåŠ¡é€»è¾‘
   - å…·å¤‡åŠ¨æ€è§„åˆ™ç”Ÿæˆã€å¹¶è¡ŒåŒ¹é…ä¼˜åŒ–ã€è‡ªåŠ¨é”™è¯¯æ¢å¤ç­‰é«˜çº§ç‰¹æ€§

3. **å…¼å®¹æ€§é€‚é…å™¨** (cognitive_workflow_adapter.py, 316è¡Œä»£ç )
   - æä¾›å‘åå…¼å®¹çš„APIæ¥å£
   - æ”¯æŒè¿è¡Œæ—¶å¼•æ“æ¨¡å¼åˆ‡æ¢
   - ä¾¿äºç°æœ‰ç³»ç»Ÿçš„æ¸è¿›å¼è¿ç§»

### 1.2 è®¾è®¡ç†å¿µ
- **è®¤çŸ¥é©±åŠ¨**: åŸºäºAIçš„æ™ºèƒ½å†³ç­–å’Œä»»åŠ¡ç®¡ç†
- **åŠ¨æ€å¯¼èˆª**: è®¡åˆ’æ˜¯çº¿æ€§çš„ï¼Œå¯¼èˆªæ˜¯åŠ¨æ€çš„
- **çŠ¶æ€æ„ŸçŸ¥**: åŸºäºå…¨å±€çŠ¶æ€çš„ä¸Šä¸‹æ–‡æ„ŸçŸ¥å†³ç­–
- **è§„åˆ™å¼•æ“**: è‡ªç„¶è¯­è¨€äº§ç”Ÿå¼è§„åˆ™çš„è¯­ä¹‰åŒ¹é…å’Œæ‰§è¡Œ
- **æ¨¡å—åŒ–**: æ¸…æ™°çš„èŒè´£åˆ†ç¦»å’Œç»„ä»¶è§£è€¦
- **å›¾çµå®Œå¤‡**: æ”¯æŒå¤æ‚çš„æ¡ä»¶åˆ¤æ–­ã€å¾ªç¯å’Œé€’å½’é€»è¾‘

### 1.3 æ ¸å¿ƒç‰¹æ€§

#### ä¼ ç»Ÿè®¤çŸ¥å·¥ä½œæµç‰¹æ€§
- ğŸ§  æ™ºèƒ½ä»»åŠ¡è§„åˆ’å’ŒåŠ¨æ€è°ƒæ•´
- ğŸ”„ è‡ªé€‚åº”å·¥ä½œæµæ‰§è¡Œ  
- ğŸ“Š å…¨å±€çŠ¶æ€ç®¡ç†å’Œè·Ÿè¸ª
- ğŸ› ï¸ å¤šæ™ºèƒ½ä½“åä½œæ‰§è¡Œ
- ğŸ” å…ˆå†³æ¡ä»¶æ™ºèƒ½æ£€æŸ¥
- ğŸ“ˆ æ‰§è¡Œå†å²å’Œå†³ç­–è¿½è¸ª
- ğŸ¯ ä¸‰è§’è‰²åˆ†ç¦»æ¶æ„(Manager-Executor-Checker)

#### äº§ç”Ÿå¼è§„åˆ™å¼•æ“ç‰¹æ€§
- ğŸ¤– IF-THENè‡ªç„¶è¯­è¨€äº§ç”Ÿå¼è§„åˆ™
- ğŸŒ è¯­ä¹‰é©±åŠ¨çš„æ¡ä»¶åŒ¹é…
- âš¡ æ™ºèƒ½å¹¶è¡ŒåŒ¹é…ä¼˜åŒ–(>5è§„åˆ™è‡ªåŠ¨å¯ç”¨)
- ğŸ”§ åŠ¨æ€è§„åˆ™ç”Ÿæˆå’Œæ‰§è¡Œ
- ğŸ—ï¸ å®Œæ•´çš„DDDæ¶æ„è®¾è®¡
- ğŸ”„ å›¾çµå®Œå¤‡çš„æ‰§è¡Œå¼•æ“
- ğŸ“Š æ€§èƒ½ç›‘æ§å’Œç»Ÿè®¡åˆ†æ
- ğŸ›¡ï¸ è‡ªåŠ¨é”™è¯¯æ¢å¤æœºåˆ¶
- ğŸ” çº¿ç¨‹å®‰å…¨çš„å¹¶å‘æ‰§è¡Œ
- ğŸ“ˆ æ‰§è¡Œå†å²å’Œè§„åˆ™è¿½è¸ª

#### ç³»ç»Ÿé›†æˆç‰¹æ€§
- ğŸ”„ åŒå¼•æ“æ¶æ„æ”¯æŒ
- ğŸ›ï¸ è¿è¡Œæ—¶æ¨¡å¼åˆ‡æ¢
- ğŸ”— å‘åå…¼å®¹API
- ğŸš€ å·¥å‚å‡½æ•°å¿«é€Ÿåˆ›å»º

### 1.4 ç³»ç»Ÿå®ç°çŠ¶æ€(æˆªè‡³2024-12-21)

#### ä»£ç è§„æ¨¡ç»Ÿè®¡
- **æ€»ä»£ç é‡**: 8,659è¡ŒPythonä»£ç 
- **ä¼ ç»Ÿè®¤çŸ¥å·¥ä½œæµ**: 1,593è¡Œ (cognitive_workflow.py)
- **äº§ç”Ÿå¼è§„åˆ™å¼•æ“**: 6,750è¡Œ (15ä¸ªæ–‡ä»¶ï¼Œå®Œæ•´DDDæ¶æ„)
- **é€‚é…å™¨ç³»ç»Ÿ**: 316è¡Œ (cognitive_workflow_adapter.py)

#### äº§ç”Ÿå¼è§„åˆ™å¼•æ“è¯¦ç»†å®ç°
- **é¢†åŸŸå±‚**: 4ä¸ªæ–‡ä»¶ (entities.py 488è¡Œ, value_objects.py 190è¡Œç­‰)
- **æœåŠ¡å±‚**: 6ä¸ªæ ¸å¿ƒæœåŠ¡ (æ€»è®¡4,000+è¡Œ)
  - RuleEngineService: 900è¡Œ (æ ¸å¿ƒåè°ƒå™¨)
  - RuleGenerationService: 762è¡Œ (AIè§„åˆ™ç”Ÿæˆ)
  - RuleExecutionService: 545è¡Œ (è§„åˆ™æ‰§è¡Œ)
  - StateService: 566è¡Œ (çŠ¶æ€ç®¡ç†)
  - AgentService: 516è¡Œ (æ™ºèƒ½ä½“ç®¡ç†)
  - LanguageModelService: 459è¡Œ (LLMæŠ½è±¡)
- **åŸºç¡€è®¾æ–½å±‚**: 1ä¸ªæ–‡ä»¶ (repository_impl.py 850è¡Œ)
- **å¼•æ“å±‚**: 1ä¸ªæ–‡ä»¶ (production_rule_workflow_engine.py 478è¡Œ)

#### åŠŸèƒ½å®Œæ•´æ€§
- âœ… åŒå¼•æ“å®Œå…¨å®ç°å¹¶æµ‹è¯•é€šè¿‡
- âœ… å·¥å‚å‡½æ•° `create_production_rule_system()` å¯ç›´æ¥ä½¿ç”¨
- âœ… å¹¶è¡Œä¼˜åŒ– (æ™ºèƒ½åˆ‡æ¢ä¸²è¡Œ/å¹¶è¡ŒåŒ¹é…)
- âœ… è‡ªåŠ¨é”™è¯¯æ¢å¤æœºåˆ¶
- âœ… çº¿ç¨‹å®‰å…¨å¹¶å‘æ‰§è¡Œ
- âœ… å®Œæ•´çš„ç¤ºä¾‹ç¨‹åº (basic_example.py, advanced_example.py)
- âœ… ä¸ç°æœ‰Agentç³»ç»Ÿé›†æˆæµ‹è¯•

## 2. åŒå¼•æ“æ¶æ„æ¦‚è§ˆ

### 2.1 æ•´ä½“ç³»ç»Ÿæ¶æ„å›¾

```mermaid
graph TB
    subgraph "ç”¨æˆ·æ¥å£å±‚"
        UI["ç”¨æˆ·æ¥å£<br/>User Interface"]
        API["APIæ¥å£<br/>API Gateway"]
    end
    
    subgraph "è®¤çŸ¥å·¥ä½œæµå¼•æ“ (ä¼ ç»Ÿ)"
        CogEngine["è®¤çŸ¥å·¥ä½œæµå¼•æ“<br/>CognitiveWorkflowEngine"]
        Manager["è®¤çŸ¥ç®¡ç†è€…<br/>CognitiveManager"]
        Executor["è®¤çŸ¥æ‰§è¡Œè€…<br/>CognitiveExecutor"]
        StateChecker["çŠ¶æ€æ¡ä»¶æ£€æŸ¥å™¨<br/>StateConditionChecker"]
    end
    
    subgraph "äº§ç”Ÿå¼è§„åˆ™å¼•æ“ (æ–°)"
        RuleEngine["äº§ç”Ÿå¼è§„åˆ™å·¥ä½œæµå¼•æ“<br/>ProductionRuleWorkflowEngine"]
        RuleEngineService["è§„åˆ™å¼•æ“æœåŠ¡<br/>RuleEngineService"]
        RuleGenService["è§„åˆ™ç”ŸæˆæœåŠ¡<br/>RuleGenerationService"]
        RuleExecService["è§„åˆ™æ‰§è¡ŒæœåŠ¡<br/>RuleExecutionService"]
    end
    
    subgraph "å…±äº«æœåŠ¡å±‚"
        GlobalState["å…¨å±€çŠ¶æ€ç®¡ç†<br/>GlobalState"]
        StateService["çŠ¶æ€æœåŠ¡<br/>StateService"]
        AgentService["æ™ºèƒ½ä½“æœåŠ¡<br/>AgentService"]
        LLMService["è¯­è¨€æ¨¡å‹æœåŠ¡<br/>LanguageModelService"]
    end
    
    subgraph "æ™ºèƒ½ä½“å±‚"
        Agents["æ™ºèƒ½ä½“é›†ç¾¤<br/>Agent Pool"]
        Agent1["åˆ†æå¸ˆ<br/>Analyst"]
        Agent2["ç¼–ç è€…<br/>Coder"]
        Agent3["æµ‹è¯•è€…<br/>Tester"]
    end
    
    subgraph "æŒä¹…åŒ–å±‚"
        RuleRepo["è§„åˆ™ä»“å‚¨<br/>RuleRepository"]
        StateRepo["çŠ¶æ€ä»“å‚¨<br/>StateRepository"]
        ExecRepo["æ‰§è¡Œä»“å‚¨<br/>ExecutionRepository"]
    end
    
    subgraph "å¤–éƒ¨æœåŠ¡"
        LLM["å¤§è¯­è¨€æ¨¡å‹<br/>LLM Services"]
        Storage["æŒä¹…åŒ–å­˜å‚¨<br/>Storage"]
    end
    
    UI --> CogEngine
    UI --> RuleEngine
    API --> CogEngine
    API --> RuleEngine
    
    CogEngine --> Manager
    CogEngine --> Executor
    CogEngine --> StateChecker
    Manager --> StateChecker
    
    RuleEngine --> RuleEngineService
    RuleEngineService --> RuleGenService
    RuleEngineService --> RuleExecService
    
    CogEngine --> GlobalState
    RuleEngine --> StateService
    
    Executor --> Agents
    RuleExecService --> AgentService
    AgentService --> Agents
    
    Agents --> Agent1
    Agents --> Agent2
    Agents --> Agent3
    
    StateService --> StateRepo
    RuleEngineService --> RuleRepo
    RuleExecService --> ExecRepo
    
    RuleGenService --> LLMService
    StateChecker --> LLM
    Manager --> LLM
    LLMService --> LLM
    
    GlobalState --> Storage
    StateRepo --> Storage
    RuleRepo --> Storage
    ExecRepo --> Storage
    
    style CogEngine fill:#e1f5fe,color:#000000,stroke:#333333,stroke-width:2px
    style RuleEngine fill:#f3e5f5,color:#000000,stroke:#333333,stroke-width:2px
    style Manager fill:#e8f5e8,color:#000000,stroke:#333333,stroke-width:2px
    style Executor fill:#fff3e0,color:#000000,stroke:#333333,stroke-width:2px
    style GlobalState fill:#fce4ec,color:#000000,stroke:#333333,stroke-width:2px
```

### 2.2 å…¼å®¹æ€§é€‚é…å™¨æ¶æ„

```mermaid
graph TB
    subgraph "ç”¨æˆ·ä»£ç å±‚"
        UserCode["ç°æœ‰ç”¨æˆ·ä»£ç <br/>Existing Code"]
        LegacyAPI["ä¼ ç»ŸAPIæ¥å£<br/>Legacy API"]
    end
    
    subgraph "é€‚é…å™¨å±‚"
        Adapter["è®¤çŸ¥å·¥ä½œæµé€‚é…å™¨<br/>CognitiveWorkflowAdapter"]
        CognitiveMultiStep["è®¤çŸ¥å¤šæ­¥éª¤æ™ºèƒ½ä½“<br/>CognitiveMultiStepAgent"]
        ModeSwitch["æ¨¡å¼åˆ‡æ¢å™¨<br/>Mode Switcher"]
    end
    
    subgraph "å¼•æ“é€‰æ‹©å±‚"
        EngineSelector["å¼•æ“é€‰æ‹©å™¨<br/>Engine Selector"]
    end
    
    subgraph "åŒå¼•æ“å®ç°"
        TraditionalEngine["ä¼ ç»Ÿè®¤çŸ¥å·¥ä½œæµå¼•æ“<br/>Traditional Cognitive Engine"]
        RuleBasedEngine["äº§ç”Ÿå¼è§„åˆ™å¼•æ“<br/>Production Rule Engine"]
    end
    
    UserCode --> LegacyAPI
    LegacyAPI --> Adapter
    Adapter --> CognitiveMultiStep
    CognitiveMultiStep --> ModeSwitch
    ModeSwitch --> EngineSelector
    EngineSelector --> TraditionalEngine
    EngineSelector --> RuleBasedEngine
    
    style Adapter fill:#ffecb3,color:#000000,stroke:#333333,stroke-width:2px
    style EngineSelector fill:#e8f5e8,color:#000000,stroke:#333333,stroke-width:2px
```

## 2.3 å¿«é€Ÿä½¿ç”¨æŒ‡å—

### 2.3.1 äº§ç”Ÿå¼è§„åˆ™å¼•æ“ (æ¨è)

```python
# å¯¼å…¥æ ¸å¿ƒç»„ä»¶
from CognitiveWorkflow.cognitive_workflow_rule_base import create_production_rule_system

# å‡†å¤‡æ™ºèƒ½ä½“å­—å…¸
agents = {
    "coder": coder_agent,
    "tester": tester_agent,
    "writer": writer_agent
}

# ä¸€è¡Œä»£ç åˆ›å»ºå®Œæ•´ç³»ç»Ÿ
workflow_engine = create_production_rule_system(
    llm=your_llm_instance,
    agents=agents,
    enable_auto_recovery=True
)

# æ‰§è¡Œå·¥ä½œæµ - åªéœ€æä¾›é«˜å±‚æ¬¡ç›®æ ‡
result = workflow_engine.execute_workflow(
    goal="å¼€å‘ä¸€ä¸ªè®¡ç®—å™¨ç¨‹åºå¹¶ç”Ÿæˆå®Œæ•´æ–‡æ¡£",
    context={"language": "Python", "framework": "tkinter"}
)

print(f"å·¥ä½œæµçŠ¶æ€: {result.status}")
print(f"æ‰§è¡Œçš„è§„åˆ™æ•°: {len(result.executed_rules)}")
print(f"æœ€ç»ˆç»“æœ: {result.final_result}")
```

### 2.3.2 ä¼ ç»Ÿè®¤çŸ¥å·¥ä½œæµ

```python
# å¯¼å…¥ä¼ ç»Ÿè®¤çŸ¥å·¥ä½œæµ
from CognitiveWorkflow.cognitive_workflow import CognitiveWorkflowEngine

# åˆ›å»ºå¼•æ“
engine = CognitiveWorkflowEngine(
    llm=your_llm_instance,
    agents=agents,
    max_iterations=50,
    enable_auto_recovery=True
)

# æ‰§è¡Œå·¥ä½œæµ
result = engine.execute_cognitive_workflow(
    goal="å¼€å‘è®¡ç®—å™¨ç¨‹åº",
    context={"requirements": "GUIç•Œé¢ï¼Œæ”¯æŒåŸºæœ¬è¿ç®—"}
)
```

### 2.3.3 å…¼å®¹æ€§é€‚é…å™¨ (ç°æœ‰é¡¹ç›®è¿ç§»)

```python
# æœ€å°æ”¹åŠ¨çš„è¿ç§»æ–¹æ¡ˆ
from CognitiveWorkflow.cognitive_workflow_adapter import CognitiveMultiStepAgent

# ä¿æŒåŸæœ‰æ¥å£ï¼Œåº•å±‚ä½¿ç”¨è®¤çŸ¥å·¥ä½œæµ
agent = CognitiveMultiStepAgent(
    llm=your_llm_instance,
    registered_agents=registered_agents,
    use_cognitive_workflow=True  # å¯ç”¨è®¤çŸ¥å·¥ä½œæµ
)

# åŸæœ‰APIè°ƒç”¨æ–¹å¼ä¸å˜
result = agent.execute_multi_step("å¼€å‘è®¡ç®—å™¨ç¨‹åº")

# å¯ä»¥éšæ—¶åˆ‡æ¢æ¨¡å¼
agent.switch_to_cognitive_mode()    # åˆ‡æ¢åˆ°è®¤çŸ¥æ¨¡å¼
agent.switch_to_traditional_mode()  # åˆ‡æ¢åˆ°ä¼ ç»Ÿæ¨¡å¼
```

## 3. äº§ç”Ÿå¼è§„åˆ™å¼•æ“æ¶æ„

### 3.1 é¢†åŸŸé©±åŠ¨è®¾è®¡æ¶æ„

```mermaid
graph TB
    subgraph "Domain Layer (é¢†åŸŸå±‚)"
        ProductionRule["ProductionRule<br/>äº§ç”Ÿå¼è§„åˆ™"]
        RuleSet["RuleSet<br/>è§„åˆ™é›†"]
        RuleExecution["RuleExecution<br/>è§„åˆ™æ‰§è¡Œ"]
        GlobalStateEntity["GlobalState<br/>å…¨å±€çŠ¶æ€å®ä½“"]
        DecisionResult["DecisionResult<br/>å†³ç­–ç»“æœ"]
        AgentCapability["AgentCapability<br/>æ™ºèƒ½ä½“èƒ½åŠ›"]
        AgentRegistry["AgentRegistry<br/>æ™ºèƒ½ä½“æ³¨å†Œè¡¨"]
        WorkflowResult["WorkflowResult<br/>å·¥ä½œæµç»“æœ"]
        
        RulePhase["RulePhase<br/>è§„åˆ™é˜¶æ®µ"]
        ExecutionStatus["ExecutionStatus<br/>æ‰§è¡ŒçŠ¶æ€"]
        DecisionType["DecisionType<br/>å†³ç­–ç±»å‹"]
        RuleSetStatus["RuleSetStatus<br/>è§„åˆ™é›†çŠ¶æ€"]
        ModificationType["ModificationType<br/>ä¿®æ”¹ç±»å‹"]
    end
    
    subgraph "Service Layer (æœåŠ¡å±‚)"
        RuleEngineService["RuleEngineService<br/>è§„åˆ™å¼•æ“æœåŠ¡"]
        RuleGenerationService["RuleGenerationService<br/>è§„åˆ™ç”ŸæˆæœåŠ¡"]
        RuleExecutionService["RuleExecutionService<br/>è§„åˆ™æ‰§è¡ŒæœåŠ¡"]
        StateService["StateService<br/>çŠ¶æ€æœåŠ¡"]
        AgentService["AgentService<br/>æ™ºèƒ½ä½“æœåŠ¡"]
        LanguageModelService["LanguageModelService<br/>è¯­è¨€æ¨¡å‹æœåŠ¡"]
    end
    
    subgraph "Infrastructure Layer (åŸºç¡€è®¾æ–½å±‚)"
        RuleRepositoryImpl["RuleRepositoryImpl<br/>è§„åˆ™ä»“å‚¨å®ç°"]
        StateRepositoryImpl["StateRepositoryImpl<br/>çŠ¶æ€ä»“å‚¨å®ç°"]
        ExecutionRepositoryImpl["ExecutionRepositoryImpl<br/>æ‰§è¡Œä»“å‚¨å®ç°"]
    end
    
    subgraph "Engine Layer (å¼•æ“å±‚)"
        ProductionRuleWorkflowEngine["ProductionRuleWorkflowEngine<br/>äº§ç”Ÿå¼è§„åˆ™å·¥ä½œæµå¼•æ“"]
    end
    
    ProductionRuleWorkflowEngine --> RuleEngineService
    RuleEngineService --> RuleGenerationService
    RuleEngineService --> RuleExecutionService
    RuleEngineService --> StateService
    RuleExecutionService --> AgentService
    
    RuleGenerationService --> LanguageModelService
    StateService --> LanguageModelService
    
    RuleEngineService --> RuleRepositoryImpl
    StateService --> StateRepositoryImpl
    RuleExecutionService --> ExecutionRepositoryImpl
    
    RuleRepositoryImpl -.-> ProductionRule
    StateRepositoryImpl -.-> GlobalStateEntity
    ExecutionRepositoryImpl -.-> RuleExecution
    
    style ProductionRule fill:#e1f5fe,color:#000000,stroke:#333333,stroke-width:2px
    style RuleEngineService fill:#e8f5e8,color:#000000,stroke:#333333,stroke-width:2px
    style ProductionRuleWorkflowEngine fill:#f3e5f5,color:#000000,stroke:#333333,stroke-width:2px
```

### 3.2 äº§ç”Ÿå¼è§„åˆ™æ‰§è¡Œæµç¨‹

```mermaid
sequenceDiagram
    participant User as ç”¨æˆ·
    participant Engine as ProductionRuleWorkflowEngine
    participant RuleEngine as RuleEngineService
    participant RuleGen as RuleGenerationService
    participant RuleExec as RuleExecutionService
    participant State as StateService
    participant Agent as AgentService
    participant LLM as LanguageModelService
    
    User->>Engine: execute_workflow(goal, context)
    Engine->>RuleEngine: initialize_workflow(goal, context)
    
    RuleEngine->>RuleGen: generate_initial_rules(goal, context)
    RuleGen->>LLM: invoke LLM for rule generation
    LLM-->>RuleGen: generated rules
    RuleGen-->>RuleEngine: List[ProductionRule]
    
    loop è§„åˆ™åŒ¹é…å’Œæ‰§è¡Œå¾ªç¯
        RuleEngine->>RuleEngine: find_matching_rules(current_state)
        Note over RuleEngine: æ™ºèƒ½è¯­ä¹‰åŒ¹é…<br/>æ”¯æŒå¹¶è¡Œä¼˜åŒ–
        
        alt æ‰¾åˆ°åŒ¹é…è§„åˆ™
            RuleEngine->>RuleExec: execute_rule(selected_rule)
            RuleExec->>Agent: execute_action(rule.action)
            Agent-->>RuleExec: execution_result
            RuleExec-->>RuleEngine: RuleExecution
            
            RuleEngine->>State: update_state(execution_result)
            State->>LLM: generate_state_description
            LLM-->>State: new_state_description
            State-->>RuleEngine: updated_state
        else æ— åŒ¹é…è§„åˆ™ä¸”éœ€è¦æ–°è§„åˆ™
            RuleEngine->>RuleGen: generate_dynamic_rules(context)
            RuleGen->>LLM: generate new rules
            LLM-->>RuleGen: new rules
            RuleGen-->>RuleEngine: List[ProductionRule]
        end
        
        RuleEngine->>RuleEngine: evaluate_termination_condition()
        
        break å·¥ä½œæµå®Œæˆ
            RuleEngine->>RuleEngine: goal achieved or max iterations
        end
    end
    
    RuleEngine-->>Engine: WorkflowResult
    Engine-->>User: workflow execution result
```

## 4. ä¼ ç»Ÿè®¤çŸ¥å·¥ä½œæµæ¶æ„

### 4.1 ä¸‰è§’è‰²åˆ†ç¦»æ¶æ„

```mermaid
classDiagram
    class CognitiveWorkflowEngine {
        -llm: BaseChatModel
        -agents: Dict[str, Agent]
        -manager: CognitiveManager
        -executor: CognitiveExecutor
        -global_state: GlobalState
        -task_list: List[CognitiveTask]
        -execution_history: List[Dict]
        -max_iterations: int
        -enable_auto_recovery: bool
        -interactive_mode: bool
        
        +execute_cognitive_workflow(goal: str, context: Dict) Dict
        +set_interactive_mode(interactive: bool) void
        +get_task_status_report() str
        -_initialize_workflow(goal: str, context: Dict) void
        -_update_global_state(task: CognitiveTask, result: Result) void
        -_handle_no_executable_tasks() bool
        -_apply_plan_modification(modification_decision: Dict) void
        -_handle_task_failure(failed_task: CognitiveTask, result: Result) void
        -_generate_workflow_summary() Dict
    }
    
    class CognitiveManager {
        -llm: BaseChatModel
        -available_agents: Dict[str, Agent]
        -condition_checker: StateConditionChecker
        -interactive_mode: bool
        -decision_history: List[Dict]
        -management_statistics: Dict[str, int]
        
        +generate_initial_tasks(goal: str, context: Dict) List[CognitiveTask]
        +generate_dynamic_tasks(modification_context: Dict, global_state: GlobalState) List[CognitiveTask]
        +find_executable_tasks(task_list: List[CognitiveTask], global_state: GlobalState) List[Tuple[CognitiveTask, float]]
        +select_next_task(executable_tasks: List, global_state: GlobalState, execution_history: List) CognitiveTask
        +evaluate_workflow_status(task_list: List[CognitiveTask], global_state: GlobalState) Dict
        +analyze_modification_needs(task_list: List[CognitiveTask], global_state: GlobalState, last_execution_result: Result) Dict
        -_generate_tasks_from_prompt(system_prompt: str, user_prompt: str, task_type: str) List[CognitiveTask]
        -_create_task_from_data(task_data: Dict) CognitiveTask
    }
    
    class CognitiveExecutor {
        -agents: Dict[str, Agent]
        -execution_history: List[Dict]
        
        +execute_task(task: CognitiveTask, global_state: GlobalState) Result
        +get_execution_statistics() Dict
    }
    
    class StateConditionChecker {
        -llm: BaseChatModel
        
        +check_precondition_satisfied(precondition: str, global_state: GlobalState) Tuple[bool, float, str]
    }
    
    class GlobalState {
        +current_state: str
        +state_history: List[Tuple[str, str, datetime]]
        +context_variables: Dict[str, Any]
        +original_goal: str
        -_llm: BaseChatModel
        
        +set_llm(llm: BaseChatModel) void
        +set_original_goal(goal: str) void
        +update_state(new_state: str, source: str, task: CognitiveTask, result: Result, intelligent: bool) str
        +get_recent_history(limit: int) List[str]
        +get_state_summary() str
    }
    
    class CognitiveTask {
        +id: str
        +name: str
        +instruction: str
        +agent_name: str
        +instruction_type: str
        +phase: TaskPhase
        +expected_output: str
        +precondition: str
        +status: TaskStatus
        +result: Result
        +created_at: datetime
        +updated_at: datetime
        +execution_context: Dict[str, Any]
        
        +to_dict() Dict[str, Any]
    }
    
    class TaskPhase {
        <<enumeration>>
        INFORMATION
        EXECUTION
        VERIFICATION
    }
    
    class TaskStatus {
        <<enumeration>>
        PENDING
        EXECUTABLE
        RUNNING
        COMPLETED
        FAILED
        SKIPPED
        CANCELLED
    }
    
    CognitiveWorkflowEngine --> CognitiveManager : ä½¿ç”¨
    CognitiveWorkflowEngine --> CognitiveExecutor : ä½¿ç”¨
    CognitiveWorkflowEngine --> GlobalState : ç®¡ç†
    CognitiveWorkflowEngine --> CognitiveTask : æ“ä½œ
    CognitiveManager --> StateConditionChecker : ä½¿ç”¨
    CognitiveManager --> CognitiveTask : åˆ›å»ºå’Œç®¡ç†
    CognitiveExecutor --> Agent : è°ƒç”¨
    CognitiveTask --> TaskPhase : ä½¿ç”¨
    CognitiveTask --> TaskStatus : ä½¿ç”¨
```

### 4.2 ä¼ ç»Ÿè®¤çŸ¥å·¥ä½œæµæ‰§è¡Œæµç¨‹

```mermaid
sequenceDiagram
    participant User as ç”¨æˆ·
    participant Engine as CognitiveWorkflowEngine
    participant Manager as CognitiveManager
    participant Executor as CognitiveExecutor
    participant State as GlobalState
    participant Checker as StateConditionChecker
    participant Agent as Agent
    
    User->>Engine: execute_cognitive_workflow(goal, context)
    
    Engine->>Manager: generate_initial_tasks(goal, context)
    Manager->>Manager: è°ƒç”¨LLMç”Ÿæˆä»»åŠ¡åˆ—è¡¨
    Manager-->>Engine: List[CognitiveTask]
    
    Engine->>State: update_state("å·¥ä½œæµåˆå§‹åŒ–å®Œæˆ")
    
    loop å·¥ä½œæµæ‰§è¡Œå¾ªç¯
        Engine->>Manager: find_executable_tasks(task_list, global_state)
        Manager->>Checker: check_precondition_satisfied(precondition, state)
        Checker->>Checker: LLMåˆ†æå…ˆå†³æ¡ä»¶
        Checker-->>Manager: (satisfied, confidence, explanation)
        Manager-->>Engine: List[(task, confidence)]
        
        alt æœ‰å¯æ‰§è¡Œä»»åŠ¡
            Engine->>Manager: select_next_task(executable_tasks, state, history)
            Manager->>Manager: LLMæ™ºèƒ½é€‰æ‹©
            Manager-->>Engine: selected_task
            
            Engine->>Executor: execute_task(selected_task, global_state)
            Executor->>Agent: execute_sync/chat_sync(instruction)
            Agent-->>Executor: Result
            Executor-->>Engine: Result
            
            Engine->>State: update_state(task, result)
            State->>State: æ™ºèƒ½çŠ¶æ€ç”Ÿæˆ
        else æ— å¯æ‰§è¡Œä»»åŠ¡
            Engine->>Manager: analyze_modification_needs(task_list, state, result)
            Manager->>Manager: LLMåˆ†æä¿®æ­£éœ€æ±‚
            Manager-->>Engine: modification_decision
            
            alt éœ€è¦åŠ¨æ€ä¿®æ­£
                Engine->>Manager: generate_dynamic_tasks(context, state)
                note right of Manager: æ™ºèƒ½åˆ†æä¿®æ­£éœ€æ±‚<br/>åŒ…æ‹¬æ–°ä»»åŠ¡ã€ä¿®å¤ä»»åŠ¡<br/>ç§»é™¤ä»»åŠ¡ã€ä¿®æ”¹ä»»åŠ¡
                Manager-->>Engine: List[CognitiveTask]
                Engine->>Engine: åº”ç”¨åŠ¨æ€ä¿®æ­£
            end
        end
        
        Engine->>Manager: evaluate_workflow_status(task_list, state)
        Manager-->>Engine: workflow_status
        
        break å·¥ä½œæµå®Œæˆ
            Engine->>Engine: æ‰€æœ‰ä»»åŠ¡å®Œæˆæˆ–è¾¾åˆ°æœ€å¤§è¿­ä»£æ¬¡æ•°
        end
    end
    
    Engine->>Engine: _generate_workflow_summary()
    Engine-->>User: å·¥ä½œæµæ‰§è¡Œç»“æœ
```

## 5. æ ¸å¿ƒç»„ä»¶è¯¦ç»†è¯´æ˜

### 5.1 ä¼ ç»Ÿè®¤çŸ¥å·¥ä½œæµç»„ä»¶

#### CognitiveWorkflowEngineï¼ˆè®¤çŸ¥å·¥ä½œæµå¼•æ“ï¼‰
- **æ ¸å¿ƒèŒè´£**: å·¥ä½œæµç”Ÿå‘½å‘¨æœŸç®¡ç†å’Œç»„ä»¶åè°ƒ
- **ä¸»è¦åŠŸèƒ½**:
  - å·¥ä½œæµåˆå§‹åŒ–å’Œæ‰§è¡Œæ§åˆ¶
  - ç»„ä»¶é—´åè°ƒå’ŒçŠ¶æ€åŒæ­¥
  - å¼‚å¸¸å¤„ç†å’Œæ¢å¤æœºåˆ¶
  - æ‰§è¡Œå†å²ç®¡ç†
- **ä»£ç è§„æ¨¡**: çº¦400è¡Œï¼ŒåŒ…å«å®Œæ•´çš„å·¥ä½œæµæ§åˆ¶é€»è¾‘

#### CognitiveManagerï¼ˆè®¤çŸ¥ç®¡ç†è€…ï¼‰
- **æ ¸å¿ƒèŒè´£**: ç»Ÿä¸€çš„è®¤çŸ¥ä»»åŠ¡ç®¡ç†
- **ä¸»è¦åŠŸèƒ½**:
  - ä»»åŠ¡è§„åˆ’ï¼šåˆå§‹ä»»åŠ¡ç”Ÿæˆã€åŠ¨æ€ä»»åŠ¡ä¿®æ­£
  - ä»»åŠ¡å†³ç­–ï¼šå¯æ‰§è¡Œä»»åŠ¡æŸ¥æ‰¾ã€ä¸‹ä¸€ä»»åŠ¡é€‰æ‹©
  - è®¡åˆ’ä¿®æ­£ï¼šéœ€æ±‚åˆ†æã€åŠ¨æ€è°ƒæ•´å†³ç­–
  - å†³ç­–å†å²è®°å½•å’Œç»Ÿè®¡
- **ä»£ç è§„æ¨¡**: çº¦800è¡Œï¼Œæ˜¯ç³»ç»Ÿæœ€å¤æ‚çš„ç»„ä»¶

#### CognitiveExecutorï¼ˆè®¤çŸ¥æ‰§è¡Œè€…ï¼‰
- **æ ¸å¿ƒèŒè´£**: çº¯ç²¹çš„ä»»åŠ¡æ‰§è¡Œ
- **ä¸»è¦åŠŸèƒ½**:
  - ä»»åŠ¡æ‰§è¡Œè°ƒåº¦
  - æ™ºèƒ½ä½“äº¤äº’ç®¡ç†
  - æ‰§è¡Œç»“æœå¤„ç†
  - æ‰§è¡Œç»Ÿè®¡æ”¶é›†
- **ä»£ç è§„æ¨¡**: çº¦100è¡Œï¼ŒèŒè´£å•ä¸€æ¸…æ™°

### 5.2 äº§ç”Ÿå¼è§„åˆ™å¼•æ“ç»„ä»¶

#### ProductionRuleWorkflowEngineï¼ˆäº§ç”Ÿå¼è§„åˆ™å·¥ä½œæµå¼•æ“ï¼‰
- **æ ¸å¿ƒèŒè´£**: åŸºäºäº§ç”Ÿå¼è§„åˆ™çš„å·¥ä½œæµæ‰§è¡Œæ§åˆ¶
- **ä¸»è¦åŠŸèƒ½**:
  - è§„åˆ™å·¥ä½œæµç”Ÿå‘½å‘¨æœŸç®¡ç†
  - è§„åˆ™åŒ¹é…å’Œæ‰§è¡Œè°ƒåº¦
  - åŠ¨æ€è§„åˆ™ç”Ÿæˆåè°ƒ
  - æ‰§è¡Œç»“æœç»Ÿè®¡å’ŒæŠ¥å‘Š
- **ä»£ç è§„æ¨¡**: çº¦500è¡Œ

#### RuleEngineServiceï¼ˆè§„åˆ™å¼•æ“æœåŠ¡ï¼‰
- **æ ¸å¿ƒèŒè´£**: è§„åˆ™åŒ¹é…ã€æ‰§è¡Œå’Œç®¡ç†çš„æ ¸å¿ƒåè°ƒå™¨
- **ä¸»è¦åŠŸèƒ½**:
  - æ™ºèƒ½è§„åˆ™åŒ¹é…ï¼ˆè¯­ä¹‰ç†è§£ï¼‰
  - è§„åˆ™æ‰§è¡Œè°ƒåº¦å’Œç®¡ç†
  - å¹¶è¡ŒåŒ¹é…ä¼˜åŒ–ï¼ˆè¶…è¿‡5ä¸ªè§„åˆ™æ—¶å¯ç”¨ï¼‰
  - åŠ¨æ€è§„åˆ™ç”Ÿæˆè§¦å‘
  - è‡ªåŠ¨é”™è¯¯æ¢å¤æœºåˆ¶
- **ä»£ç è§„æ¨¡**: çº¦900è¡Œï¼Œç³»ç»Ÿæœ€æ ¸å¿ƒç»„ä»¶
- **æ€§èƒ½ä¼˜åŒ–**: æ™ºèƒ½å¹¶è¡Œ/ä¸²è¡Œåˆ‡æ¢ï¼Œæ”¯æŒæœ€å¤§200ä¸ªå¹¶å‘è§„åˆ™åŒ¹é…

#### RuleGenerationServiceï¼ˆè§„åˆ™ç”ŸæˆæœåŠ¡ï¼‰
- **æ ¸å¿ƒèŒè´£**: åŠ¨æ€ç”Ÿæˆäº§ç”Ÿå¼è§„åˆ™
- **ä¸»è¦åŠŸèƒ½**:
  - åˆå§‹è§„åˆ™é›†ç”Ÿæˆ
  - è¿è¡Œæ—¶è§„åˆ™åŠ¨æ€ç”Ÿæˆ
  - è§„åˆ™éªŒè¯å’Œä¼˜åŒ–
  - è§„åˆ™è¯­ä¹‰ä¸€è‡´æ€§æ£€æŸ¥
- **ä»£ç è§„æ¨¡**: çº¦760è¡Œ
- **AIé›†æˆ**: æ·±åº¦é›†æˆLLMè¿›è¡Œè‡ªç„¶è¯­è¨€è§„åˆ™ç”Ÿæˆ

#### RuleExecutionServiceï¼ˆè§„åˆ™æ‰§è¡ŒæœåŠ¡ï¼‰
- **æ ¸å¿ƒèŒè´£**: è§„åˆ™åŠ¨ä½œçš„å®é™…æ‰§è¡Œ
- **ä¸»è¦åŠŸèƒ½**:
  - è‡ªç„¶è¯­è¨€æŒ‡ä»¤è§£æå’Œæ‰§è¡Œ
  - æ™ºèƒ½ä½“è°ƒç”¨å’Œç»“æœå¤„ç†
  - æ‰§è¡Œå†å²è®°å½•å’Œç»Ÿè®¡
  - é”™è¯¯å¤„ç†å’Œé‡è¯•æœºåˆ¶
- **ä»£ç è§„æ¨¡**: çº¦545è¡Œ

#### StateServiceï¼ˆçŠ¶æ€æœåŠ¡ï¼‰
- **æ ¸å¿ƒèŒè´£**: å·¥ä½œæµçŠ¶æ€ç®¡ç†å’ŒæŸ¥è¯¢
- **ä¸»è¦åŠŸèƒ½**:
  - æ™ºèƒ½çŠ¶æ€æè¿°ç”Ÿæˆ
  - çŠ¶æ€å†å²ç®¡ç†
  - çŠ¶æ€æŸ¥è¯¢å’Œåˆ†æ
  - çŠ¶æ€å˜æ›´é€šçŸ¥
- **ä»£ç è§„æ¨¡**: çº¦465è¡Œ

### 5.3 å…±äº«æœåŠ¡ç»„ä»¶

#### AgentServiceï¼ˆæ™ºèƒ½ä½“æœåŠ¡ï¼‰
- **æ ¸å¿ƒèŒè´£**: æ™ºèƒ½ä½“ç”Ÿå‘½å‘¨æœŸç®¡ç†
- **ä¸»è¦åŠŸèƒ½**:
  - æ™ºèƒ½ä½“æ³¨å†Œå’Œå‘ç°
  - èƒ½åŠ›åŒ¹é…å’Œé€‰æ‹©
  - æ‰§è¡Œè°ƒåº¦å’Œè´Ÿè½½å‡è¡¡
  - å¥åº·æ£€æŸ¥å’Œæ•…éšœè½¬ç§»
- **ä»£ç è§„æ¨¡**: çº¦515è¡Œ

#### LanguageModelServiceï¼ˆè¯­è¨€æ¨¡å‹æœåŠ¡ï¼‰
- **æ ¸å¿ƒèŒè´£**: LLMè°ƒç”¨çš„ç»Ÿä¸€æŠ½è±¡
- **ä¸»è¦åŠŸèƒ½**:
  - å¤šç§LLMæä¾›å•†æ”¯æŒ
  - è¯·æ±‚ä¼˜åŒ–å’Œç¼“å­˜
  - é”™è¯¯å¤„ç†å’Œé‡è¯•
  - æ€§èƒ½ç›‘æ§å’Œç»Ÿè®¡
- **ä»£ç è§„æ¨¡**: çº¦460è¡Œ

## 6. ç³»ç»Ÿé›†æˆå’Œéƒ¨ç½²æ¶æ„

### 6.1 ç³»ç»Ÿé›†æˆæ¶æ„

```mermaid
graph TB
    subgraph "åº”ç”¨å±‚"
        WebApp["Webåº”ç”¨"]
        CLIApp["å‘½ä»¤è¡Œåº”ç”¨"]
        APIClient["APIå®¢æˆ·ç«¯"]
    end
    
    subgraph "æ¥å£é€‚é…å±‚"
        RestAPI["REST API"]
        GraphQLAPI["GraphQL API"]
        RPCInterface["RPCæ¥å£"]
    end
    
    subgraph "è®¤çŸ¥å·¥ä½œæµç³»ç»Ÿ"
        CognitiveWorkflow["ä¼ ç»Ÿè®¤çŸ¥å·¥ä½œæµ"]
        ProductionRuleEngine["äº§ç”Ÿå¼è§„åˆ™å¼•æ“"]
        AdapterLayer["é€‚é…å™¨å±‚"]
    end
    
    subgraph "æœåŠ¡æ”¯æ’‘å±‚"
        ConfigService["é…ç½®æœåŠ¡"]
        LoggingService["æ—¥å¿—æœåŠ¡"]
        MonitoringService["ç›‘æ§æœåŠ¡"]
        CachingService["ç¼“å­˜æœåŠ¡"]
    end
    
    subgraph "å¤–éƒ¨é›†æˆ"
        LLMProviders["LLMæä¾›å•†"]
        DatabaseSystems["æ•°æ®åº“ç³»ç»Ÿ"]
        MessageQueues["æ¶ˆæ¯é˜Ÿåˆ—"]
        FileStorage["æ–‡ä»¶å­˜å‚¨"]
    end
    
    WebApp --> RestAPI
    CLIApp --> RPCInterface
    APIClient --> GraphQLAPI
    
    RestAPI --> AdapterLayer
    GraphQLAPI --> AdapterLayer
    RPCInterface --> AdapterLayer
    
    AdapterLayer --> CognitiveWorkflow
    AdapterLayer --> ProductionRuleEngine
    
    CognitiveWorkflow --> ConfigService
    ProductionRuleEngine --> ConfigService
    CognitiveWorkflow --> LoggingService
    ProductionRuleEngine --> LoggingService
    
    CognitiveWorkflow --> LLMProviders
    ProductionRuleEngine --> LLMProviders
    ProductionRuleEngine --> DatabaseSystems
```

### 6.2 éƒ¨ç½²æ¶æ„

```mermaid
graph TB
    subgraph "è´Ÿè½½å‡è¡¡å±‚"
        LoadBalancer["è´Ÿè½½å‡è¡¡å™¨<br/>Nginx/HAProxy"]
    end
    
    subgraph "åº”ç”¨æœåŠ¡å±‚"
        AppServer1["åº”ç”¨æœåŠ¡å™¨ 1<br/>CognitiveWorkflow"]
        AppServer2["åº”ç”¨æœåŠ¡å™¨ 2<br/>CognitiveWorkflow"]
        AppServer3["åº”ç”¨æœåŠ¡å™¨ 3<br/>ProductionRule"]
    end
    
    subgraph "æœåŠ¡å‘ç°"
        ServiceRegistry["æœåŠ¡æ³¨å†Œä¸­å¿ƒ<br/>Consul/Eureka"]
    end
    
    subgraph "æ•°æ®å±‚"
        Redis["Redis<br/>ç¼“å­˜/ä¼šè¯"]
        MongoDB["MongoDB<br/>è§„åˆ™å­˜å‚¨"]
        PostgreSQL["PostgreSQL<br/>æ‰§è¡Œå†å²"]
    end
    
    subgraph "ç›‘æ§å±‚"
        Prometheus["Prometheus<br/>æŒ‡æ ‡æ”¶é›†"]
        Grafana["Grafana<br/>ç›‘æ§é¢æ¿"]
        ELK["ELK Stack<br/>æ—¥å¿—åˆ†æ"]
    end
    
    subgraph "å¤–éƒ¨æœåŠ¡"
        OpenAI["OpenAI API"]
        Anthropic["Anthropic API"]
        LocalLLM["æœ¬åœ°LLMæœåŠ¡"]
    end
    
    LoadBalancer --> AppServer1
    LoadBalancer --> AppServer2
    LoadBalancer --> AppServer3
    
    AppServer1 --> ServiceRegistry
    AppServer2 --> ServiceRegistry
    AppServer3 --> ServiceRegistry
    
    AppServer1 --> Redis
    AppServer2 --> Redis
    AppServer3 --> MongoDB
    AppServer3 --> PostgreSQL
    
    AppServer1 --> OpenAI
    AppServer2 --> Anthropic
    AppServer3 --> LocalLLM
    
    AppServer1 --> Prometheus
    AppServer2 --> Prometheus
    AppServer3 --> Prometheus
    
    Prometheus --> Grafana
    AppServer1 --> ELK
    AppServer2 --> ELK
    AppServer3 --> ELK
```

## 7. æ€§èƒ½ç‰¹æ€§å’Œä¼˜åŒ–

### 7.1 æ€§èƒ½æŒ‡æ ‡

| ç»„ä»¶ | ä»£ç è§„æ¨¡ | å¹¶å‘å¤„ç†èƒ½åŠ› | å†…å­˜å ç”¨ | å“åº”æ—¶é—´ |
|------|----------|--------------|----------|----------|
| ä¼ ç»Ÿè®¤çŸ¥å·¥ä½œæµ | 1593è¡Œ | ä¸­ç­‰ | é€‚ä¸­ | 1-5ç§’ |
| äº§ç”Ÿå¼è§„åˆ™å¼•æ“ | 6750è¡Œ | é«˜ | è¾ƒé«˜ | 0.5-3ç§’ |
| é€‚é…å™¨å±‚ | 316è¡Œ | é«˜ | ä½ | <0.5ç§’ |
| æ€»ç³»ç»Ÿ | 8659è¡Œ | é«˜ | é€‚ä¸­ | 0.5-5ç§’ |

### 7.2 æ ¸å¿ƒä¼˜åŒ–ç‰¹æ€§

#### äº§ç”Ÿå¼è§„åˆ™å¼•æ“ä¼˜åŒ–
- **æ™ºèƒ½å¹¶è¡ŒåŒ¹é…**: è§„åˆ™æ•°é‡>5æ—¶è‡ªåŠ¨å¯ç”¨å¹¶è¡Œå¤„ç†
- **æœ€å¤§å¹¶å‘æ•°**: æ”¯æŒ200ä¸ªå¹¶å‘è§„åˆ™åŒ¹é…
- **ç¼“å­˜ä¼˜åŒ–**: LLMå“åº”ç¼“å­˜ï¼Œç§»é™¤æ—¶é—´æˆ³å­—æ®µæå‡ç¼“å­˜å‘½ä¸­ç‡
- **çº¿ç¨‹å®‰å…¨**: ä½¿ç”¨threading.Lockç¡®ä¿å¹¶å‘å®‰å…¨
- **å†…å­˜ä¼˜åŒ–**: æ™ºèƒ½åƒåœ¾å›æ”¶å’Œå¯¹è±¡æ± 

#### ä¼ ç»Ÿè®¤çŸ¥å·¥ä½œæµä¼˜åŒ–
- **çŠ¶æ€æ™ºèƒ½ç”Ÿæˆ**: LLMé©±åŠ¨çš„çŠ¶æ€æè¿°ï¼Œæ”¯æŒfallbackæœºåˆ¶
- **å¹¶è¡Œä»»åŠ¡æ£€æŸ¥**: å¾…æ‰§è¡Œä»»åŠ¡çš„å¹¶è¡Œå…ˆå†³æ¡ä»¶æ£€æŸ¥
- **åŠ¨æ€è®¡åˆ’ä¿®æ­£**: å®æ—¶è°ƒæ•´ä»»åŠ¡åˆ—è¡¨ï¼Œé¿å…æ­»é”
- **æ‰§è¡Œå†å²å‹ç¼©**: æ™ºèƒ½å†å²è®°å½•ç®¡ç†ï¼Œé˜²æ­¢å†…å­˜æº¢å‡º

## 8. åº”ç”¨åœºæ™¯å’Œæœ€ä½³å®è·µ

### 8.1 ä¼ ç»Ÿè®¤çŸ¥å·¥ä½œæµé€‚ç”¨åœºæ™¯
- ğŸ¯ **é¡¹ç›®ç®¡ç†**: å¤æ‚é¡¹ç›®çš„ä»»åŠ¡åˆ†è§£å’Œæ‰§è¡Œç®¡ç†
- ğŸ”§ **è½¯ä»¶å¼€å‘**: ä»£ç ç”Ÿæˆã€æµ‹è¯•ã€éƒ¨ç½²çš„å®Œæ•´æµç¨‹
- ğŸ“Š **æ•°æ®åˆ†æ**: å¤šæ­¥éª¤æ•°æ®å¤„ç†å’Œåˆ†æå·¥ä½œæµ
- ğŸ—ï¸ **åŸºç¡€æ¶æ„**: æœåŠ¡å™¨é…ç½®å’Œç¯å¢ƒéƒ¨ç½²ç®¡ç†

### 8.2 äº§ç”Ÿå¼è§„åˆ™å¼•æ“é€‚ç”¨åœºæ™¯
- ğŸ¤– **æ™ºèƒ½å†³ç­–**: å¤æ‚ä¸šåŠ¡è§„åˆ™çš„è‡ªåŠ¨åŒ–æ‰§è¡Œ
- ğŸ” **è¯Šæ–­ç³»ç»Ÿ**: åŸºäºç—‡çŠ¶çš„é—®é¢˜è¯Šæ–­å’Œè§£å†³
- ğŸ“‹ **åˆè§„æ£€æŸ¥**: æ³•è§„å’Œæ”¿ç­–çš„è‡ªåŠ¨åŒ–åˆè§„éªŒè¯
- ğŸ® **æ¸¸æˆAI**: å¤æ‚çš„æ¸¸æˆé€»è¾‘å’ŒNPCè¡Œä¸ºæ§åˆ¶
- ğŸ’¼ **ä¸šåŠ¡æµç¨‹**: ä¼ä¸šçº§ä¸šåŠ¡æµç¨‹çš„è‡ªåŠ¨åŒ–ç®¡ç†

### 8.3 é€‰æ‹©æŒ‡å—

| åœºæ™¯ç‰¹å¾ | æ¨èå¼•æ“ | ç†ç”± |
|----------|----------|------|
| çº¿æ€§ä»»åŠ¡æµç¨‹ | ä¼ ç»Ÿè®¤çŸ¥å·¥ä½œæµ | ç®€å•ç›´è§‚ï¼Œæ€§èƒ½ä¼˜å¼‚ |
| å¤æ‚æ¡ä»¶åˆ¤æ–­ | äº§ç”Ÿå¼è§„åˆ™å¼•æ“ | å›¾çµå®Œå¤‡ï¼Œæ”¯æŒå¤æ‚é€»è¾‘ |
| éœ€è¦åŠ¨æ€è§„åˆ™ | äº§ç”Ÿå¼è§„åˆ™å¼•æ“ | æ”¯æŒè¿è¡Œæ—¶è§„åˆ™ç”Ÿæˆ |
| é«˜å¹¶å‘éœ€æ±‚ | äº§ç”Ÿå¼è§„åˆ™å¼•æ“ | ä¼˜åŒ–çš„å¹¶è¡Œå¤„ç†èƒ½åŠ› |
| å¿«é€ŸåŸå‹å¼€å‘ | ä¼ ç»Ÿè®¤çŸ¥å·¥ä½œæµ | å¼€å‘å‘¨æœŸçŸ­ï¼Œæ˜“äºè°ƒè¯• |
| ä¼ä¸šçº§åº”ç”¨ | äº§ç”Ÿå¼è§„åˆ™å¼•æ“ | å®Œæ•´çš„DDDæ¶æ„ï¼Œæ˜“äºç»´æŠ¤ |

## 9. æŠ€æœ¯å€ºåŠ¡å’Œæœªæ¥è§„åˆ’

### 9.1 å½“å‰æŠ€æœ¯å€ºåŠ¡
- **ä»£ç é‡å¤**: ä¸¤ä¸ªå¼•æ“é—´å­˜åœ¨éƒ¨åˆ†åŠŸèƒ½é‡å¤
- **æµ‹è¯•è¦†ç›–**: äº§ç”Ÿå¼è§„åˆ™å¼•æ“éœ€è¦æ›´å®Œæ•´çš„æµ‹è¯•å¥—ä»¶
- **æ–‡æ¡£ç»´æŠ¤**: éœ€è¦æŒç»­æ›´æ–°æŠ€æœ¯æ–‡æ¡£
- **æ€§èƒ½ç›‘æ§**: ç¼ºä¹å®Œæ•´çš„æ€§èƒ½ç›‘æ§ä½“ç³»

### 9.2 æœªæ¥å‘å±•è§„åˆ’

#### çŸ­æœŸç›®æ ‡ï¼ˆ1-3ä¸ªæœˆï¼‰
- ğŸ”§ å®Œå–„äº§ç”Ÿå¼è§„åˆ™å¼•æ“çš„æµ‹è¯•è¦†ç›–ç‡
- ğŸ“Š å®ç°å®Œæ•´çš„æ€§èƒ½ç›‘æ§å’ŒæŠ¥å‘Šç³»ç»Ÿ
- ğŸš€ ä¼˜åŒ–ä¸¤ä¸ªå¼•æ“çš„é›†æˆå’Œåˆ‡æ¢æœºåˆ¶
- ğŸ“ è¡¥å……å®Œæ•´çš„APIæ–‡æ¡£å’Œä½¿ç”¨æŒ‡å—

#### ä¸­æœŸç›®æ ‡ï¼ˆ3-6ä¸ªæœˆï¼‰
- ğŸŒ å®ç°åˆ†å¸ƒå¼è§„åˆ™æ‰§è¡Œå¼•æ“
- ğŸ”„ å¼•å…¥è§„åˆ™ç‰ˆæœ¬ç®¡ç†å’Œå›æ»šæœºåˆ¶
- ğŸ¯ å®ç°æ›´æ™ºèƒ½çš„è§„åˆ™æ¨èç³»ç»Ÿ
- ğŸ“ˆ æ·»åŠ è§„åˆ™æ€§èƒ½åˆ†æå’Œä¼˜åŒ–å»ºè®®

#### é•¿æœŸç›®æ ‡ï¼ˆ6-12ä¸ªæœˆï¼‰
- ğŸ¤– å®ç°è‡ªå­¦ä¹ è§„åˆ™å¼•æ“
- ğŸŒ äº§ç”Ÿå¼è§„åˆ™å¤šè·¯å¾„æ¨ç†ç½‘ç»œ
- âš¡ æ™ºèƒ½è§„åˆ™å†²çªæ¶ˆè§£ç­–ç•¥
- ğŸŒ æ”¯æŒå¤šè¯­è¨€è§„åˆ™æè¿°
- ğŸ” åŠ å¼ºå®‰å…¨æ€§å’Œæƒé™ç®¡ç†
- ğŸ¢ æ”¯æŒä¼ä¸šçº§éƒ¨ç½²å’Œç®¡ç†

### 9.3 æœªæ¥ç‰ˆæœ¬æ ¸å¿ƒç‰¹æ€§é¢„è§ˆ

#### 9.3.1 äº§ç”Ÿå¼è§„åˆ™å¤šè·¯å¾„æ¨ç†ç½‘ç»œ (v2.0)

**è®¾è®¡ç†å¿µ**
å¤šè·¯å¾„æ¨ç†ç½‘ç»œå°†ä¼ ç»Ÿçš„çº¿æ€§è§„åˆ™æ‰§è¡Œæ‰©å±•ä¸ºå›¾çŠ¶æ¨ç†ç»“æ„ï¼Œæ”¯æŒï¼š
- **å¹¶è¡Œæ¨ç†è·¯å¾„**: åŒæ—¶æ¢ç´¢å¤šä¸ªå¯èƒ½çš„è§£å†³æ–¹æ¡ˆ
- **åŠ¨æ€è·¯å¾„é€‰æ‹©**: åŸºäºå®æ—¶åé¦ˆè°ƒæ•´æ¨ç†æ–¹å‘
- **è·¯å¾„æ”¶æ•›æœºåˆ¶**: å°†å¤šä¸ªæ¨ç†ç»“æœæ™ºèƒ½åˆå¹¶

**æŠ€æœ¯æ¶æ„**
```python
class MultiPathReasoningNetwork:
    """å¤šè·¯å¾„æ¨ç†ç½‘ç»œ"""
    
    def __init__(self):
        self.reasoning_graph = ReasoningGraph()
        self.path_executor = ParallelPathExecutor()
        self.convergence_engine = PathConvergenceEngine()
    
    def explore_paths(self, initial_state: GlobalState) -> List[ReasoningPath]:
        """æ¢ç´¢å¤šæ¡æ¨ç†è·¯å¾„"""
        paths = self.reasoning_graph.generate_paths(initial_state)
        return self.path_executor.execute_parallel(paths)
    
    def converge_results(self, paths: List[ReasoningPath]) -> ConsolidatedResult:
        """æ”¶æ•›å¤šè·¯å¾„ç»“æœ"""
        return self.convergence_engine.merge_paths(paths)
```

**åº”ç”¨åœºæ™¯**
- å¤æ‚å†³ç­–é—®é¢˜çš„å¤šæ–¹æ¡ˆå¯¹æ¯”
- ä¸ç¡®å®šç¯å¢ƒä¸‹çš„é£é™©è¯„ä¼°
- åˆ›æ„ç”Ÿæˆå’Œæ–¹æ¡ˆä¼˜åŒ–

#### 9.3.2 æ™ºèƒ½è§„åˆ™å†²çªæ¶ˆè§£ç­–ç•¥ (v2.0)

**å†²çªç±»å‹è¯†åˆ«**
- **ç›´æ¥å†²çª**: è§„åˆ™ç»“è®ºç›¸äº’çŸ›ç›¾
- **é—´æ¥å†²çª**: è§„åˆ™æ‰§è¡Œé¡ºåºä¾èµ–å†²çª
- **èµ„æºå†²çª**: å¤šä¸ªè§„åˆ™ç«äº‰æœ‰é™èµ„æº
- **ä¼˜å…ˆçº§å†²çª**: è§„åˆ™é‡è¦æ€§åˆ¤æ–­å·®å¼‚

**æ¶ˆè§£ç­–ç•¥æ¡†æ¶**
```python
class ConflictResolutionEngine:
    """è§„åˆ™å†²çªæ¶ˆè§£å¼•æ“"""
    
    def __init__(self):
        self.conflict_detector = ConflictDetector()
        self.resolution_strategies = {
            ConflictType.DIRECT: DirectConflictResolver(),
            ConflictType.INDIRECT: IndirectConflictResolver(),
            ConflictType.RESOURCE: ResourceConflictResolver(),
            ConflictType.PRIORITY: PriorityConflictResolver()
        }
    
    def resolve_conflicts(self, conflicting_rules: List[ProductionRule]) -> Resolution:
        """æ™ºèƒ½å†²çªæ¶ˆè§£"""
        conflicts = self.conflict_detector.analyze(conflicting_rules)
        
        for conflict in conflicts:
            strategy = self.resolution_strategies[conflict.type]
            resolution = strategy.resolve(conflict)
            self.apply_resolution(resolution)
        
        return self.generate_resolution_report()
```

**æ¶ˆè§£æœºåˆ¶**
- **ä¼˜å…ˆçº§æ’åº**: åŸºäºè§„åˆ™é‡è¦æ€§å’Œæ‰§è¡Œå†å²
- **æ—¶é—´çª—å£**: å…è®¸è§„åˆ™åœ¨ä¸åŒæ—¶é—´æ®µæ‰§è¡Œ
- **æ¡ä»¶ç»†åŒ–**: é€šè¿‡å¢åŠ æ¡ä»¶é™åˆ¶å‡å°‘å†²çª
- **åå•†æœºåˆ¶**: æ™ºèƒ½ä½“é—´çš„åå•†å’Œå¦¥å

### 9.4 æ¶æ„æ¼”è¿›è·¯çº¿å›¾

```mermaid
timeline
    title è®¤çŸ¥å·¥ä½œæµç³»ç»Ÿæ¶æ„æ¼”è¿›
    
    section å½“å‰ç‰ˆæœ¬ (v1.0)
        ä¼ ç»Ÿè®¤çŸ¥å·¥ä½œæµ : ä¸‰è§’è‰²åˆ†ç¦»æ¶æ„
                      : åŠ¨æ€ä»»åŠ¡å¯¼èˆª
                      : çŠ¶æ€æ»¡è¶³æ€§æ£€æŸ¥
        
        äº§ç”Ÿå¼è§„åˆ™å¼•æ“ : DDDæ¶æ„è®¾è®¡
                     : è‡ªç„¶è¯­è¨€è§„åˆ™
                     : å¹¶è¡Œæ‰§è¡Œä¼˜åŒ–
        
        é€‚é…å™¨ç³»ç»Ÿ : å‘åå…¼å®¹
                 : è¿è¡Œæ—¶æ¨¡å¼åˆ‡æ¢
    
    section ä¸‹ä¸€ç‰ˆæœ¬ (v1.1)
        æ€§èƒ½ä¼˜åŒ– : åˆ†å¸ƒå¼æ‰§è¡Œ
               : æ™ºèƒ½ç¼“å­˜
               : è´Ÿè½½å‡è¡¡
        
        åŠŸèƒ½å¢å¼º : è§„åˆ™ç‰ˆæœ¬ç®¡ç†
               : æ‰§è¡Œå†å²åˆ†æ
               : æ™ºèƒ½æ¨è
    
    section æœªæ¥ç‰ˆæœ¬ (v2.0)
        AIå¢å¼º : è‡ªå­¦ä¹ è§„åˆ™å¼•æ“
              : æ™ºèƒ½ä¼˜åŒ–å»ºè®®
              : é¢„æµ‹æ€§æ‰§è¡Œ
        
        é«˜çº§æ¨ç† : å¤šè·¯å¾„æ¨ç†ç½‘ç»œ
                : è§„åˆ™å†²çªæ¶ˆè§£ç­–ç•¥
                : æ¨ç†è·¯å¾„ä¼˜åŒ–
        
        ä¼ä¸šçº§ : å¤šç§Ÿæˆ·æ”¯æŒ
              : é«˜çº§å®‰å…¨ç‰¹æ€§
              : åˆè§„æ€§ç®¡ç†
```

## 10. ç»“è®º

è®¤çŸ¥å·¥ä½œæµç³»ç»Ÿå·²ç»å‘å±•æˆä¸ºä¸€ä¸ªåŠŸèƒ½å®Œæ•´ã€æ¶æ„æ¸…æ™°çš„åŒå¼•æ“æ™ºèƒ½å·¥ä½œæµå¹³å°ã€‚é€šè¿‡ä¼ ç»Ÿè®¤çŸ¥å·¥ä½œæµå’Œäº§ç”Ÿå¼è§„åˆ™å¼•æ“çš„ç»“åˆï¼Œç³»ç»Ÿèƒ½å¤Ÿæ»¡è¶³ä»ç®€å•ä»»åŠ¡ç®¡ç†åˆ°å¤æ‚ä¸šåŠ¡è§„åˆ™æ‰§è¡Œçš„å„ç§éœ€æ±‚ã€‚

### 10.1 æ ¸å¿ƒä¼˜åŠ¿
- **åŒå¼•æ“æ¶æ„**: ä¸ºä¸åŒåœºæ™¯æä¾›æœ€ä¼˜è§£å†³æ–¹æ¡ˆ
- **å®Œæ•´çš„DDDå®ç°**: äº§ç”Ÿå¼è§„åˆ™å¼•æ“é‡‡ç”¨é¢†åŸŸé©±åŠ¨è®¾è®¡
- **é«˜æ€§èƒ½ä¼˜åŒ–**: æ™ºèƒ½å¹¶è¡Œå¤„ç†å’Œç¼“å­˜ä¼˜åŒ–
- **å‘åå…¼å®¹**: é€‚é…å™¨ç¡®ä¿ç°æœ‰ä»£ç æ— ç¼è¿ç§»
- **å›¾çµå®Œå¤‡**: æ”¯æŒå¤æ‚çš„æ¡ä»¶åˆ¤æ–­å’Œå¾ªç¯é€»è¾‘

### 10.2 ç³»ç»Ÿæˆç†Ÿåº¦
- **ä»£ç è§„æ¨¡**: æ€»è®¡8659è¡Œé«˜è´¨é‡ä»£ç 
- **æ¶æ„å®Œæ•´æ€§**: ä»é¢†åŸŸæ¨¡å‹åˆ°åŸºç¡€è®¾æ–½çš„å®Œæ•´å®ç°
- **åŠŸèƒ½è¦†ç›–**: æ”¯æŒå·¥ä½œæµçš„å…¨ç”Ÿå‘½å‘¨æœŸç®¡ç†
- **æ€§èƒ½ä¼˜åŒ–**: é’ˆå¯¹ä¸åŒåœºæ™¯çš„ä¸“é—¨ä¼˜åŒ–
- **æ‰©å±•æ€§**: æ¨¡å—åŒ–è®¾è®¡æ”¯æŒçµæ´»æ‰©å±•

### 10.3 åº”ç”¨ä»·å€¼
ç³»ç»Ÿå·²ç»ä»æ¦‚å¿µéªŒè¯é˜¶æ®µå‘å±•ä¸ºç”Ÿäº§å°±ç»ªçš„ä¼ä¸šçº§è§£å†³æ–¹æ¡ˆï¼Œèƒ½å¤Ÿæ˜¾è‘—æå‡æ™ºèƒ½ä½“åä½œçš„æ•ˆç‡å’Œå¯é æ€§ï¼Œä¸ºAIå·¥ä½œæµé¢†åŸŸæä¾›äº†å®Œæ•´çš„æŠ€æœ¯æ ˆå’Œæœ€ä½³å®è·µå‚è€ƒã€‚

## 11. æœ€æ–°æ›´æ–°è¯´æ˜ (2024-12-21)

### 11.1 é‡å¤§æ¶æ„å‡çº§å®Œæˆ
æœ¬æ¬¡æ›´æ–°æ ‡å¿—ç€è®¤çŸ¥å·¥ä½œæµç³»ç»Ÿå®Œæˆäº†ä»å•ä¸€å¼•æ“åˆ°åŒå¼•æ“æ¶æ„çš„é‡å¤§å‡çº§ï¼š

#### ä¼ ç»Ÿè®¤çŸ¥å·¥ä½œæµ (cognitive_workflow.py)
- âœ… **å®Œå…¨é‡æ„**: 1,593è¡Œä»£ç ï¼Œå®ç°ä¸‰è§’è‰²åˆ†ç¦»æ¶æ„
- âœ… **æ™ºèƒ½çŠ¶æ€ç®¡ç†**: åŸºäºLLMçš„çŠ¶æ€æè¿°ç”Ÿæˆ
- âœ… **åŠ¨æ€è®¡åˆ’ä¿®æ­£**: æ”¯æŒè¿è¡Œæ—¶ä»»åŠ¡è°ƒæ•´å’Œé”™è¯¯æ¢å¤
- âœ… **å…ˆå†³æ¡ä»¶æ£€æŸ¥**: æ›¿ä»£ä¼ ç»Ÿä¾èµ–å…³ç³»çš„æ™ºèƒ½æ¡ä»¶åŒ¹é…
- âœ… **å¹¶è¡Œä¼˜åŒ–**: æ”¯æŒå¹¶è¡Œä»»åŠ¡å…ˆå†³æ¡ä»¶æ£€æŸ¥

#### äº§ç”Ÿå¼è§„åˆ™å¼•æ“ (cognitive_workflow_rule_base/)
- âœ… **å®Œæ•´DDDæ¶æ„**: 6,750è¡Œä»£ç ï¼Œä¸¥æ ¼çš„é¢†åŸŸé©±åŠ¨è®¾è®¡
- âœ… **15ä¸ªæ ¸å¿ƒç»„ä»¶**: ä»é¢†åŸŸå®ä½“åˆ°åŸºç¡€è®¾æ–½çš„å®Œæ•´å®ç°
- âœ… **å›¾çµå®Œå¤‡å¼•æ“**: æ”¯æŒå¤æ‚æ¡ä»¶åˆ¤æ–­ã€å¾ªç¯å’Œé€’å½’
- âœ… **æ™ºèƒ½å¹¶è¡ŒåŒ¹é…**: å¤§äº5ä¸ªè§„åˆ™æ—¶è‡ªåŠ¨å¯ç”¨å¹¶è¡Œå¤„ç†
- âœ… **åŠ¨æ€è§„åˆ™ç”Ÿæˆ**: AIé©±åŠ¨çš„è¿è¡Œæ—¶è§„åˆ™åˆ›å»ºå’Œä¼˜åŒ–
- âœ… **è‡ªåŠ¨é”™è¯¯æ¢å¤**: å†…ç½®çš„é”™è¯¯æ£€æµ‹å’Œæ¢å¤æœºåˆ¶
- âœ… **æ€§èƒ½ç›‘æ§**: å®Œæ•´çš„æ‰§è¡Œç»Ÿè®¡å’Œæ€§èƒ½åˆ†æ

#### å…¼å®¹æ€§é€‚é…å™¨ (cognitive_workflow_adapter.py)
- âœ… **é›¶æ”¹åŠ¨è¿ç§»**: 316è¡Œä»£ç æä¾›å®Œå…¨å‘åå…¼å®¹
- âœ… **è¿è¡Œæ—¶åˆ‡æ¢**: æ”¯æŒåœ¨è®¤çŸ¥æ¨¡å¼å’Œä¼ ç»Ÿæ¨¡å¼é—´åŠ¨æ€åˆ‡æ¢
- âœ… **æ¸è¿›å¼å‡çº§**: ç°æœ‰é¡¹ç›®å¯ä»¥é€æ­¥è¿ç§»åˆ°æ–°æ¶æ„

### 11.2 æ ¸å¿ƒæŠ€æœ¯çªç ´

#### è‡ªç„¶è¯­è¨€äº§ç”Ÿå¼è§„åˆ™
```python
# ç¤ºä¾‹ï¼šè‡ªç„¶è¯­è¨€IF-THENè§„åˆ™
rule = ProductionRule(
    id="coding_rule_1",
    condition="éœ€è¦ç¼–å†™ä»£ç ä¸”å¼€å‘ç¯å¢ƒå·²å‡†å¤‡å°±ç»ª",
    action="è°ƒç”¨ç¼–ç¨‹æ™ºèƒ½ä½“ç¼–å†™ä»£ç å¹¶è¿›è¡Œå•å…ƒæµ‹è¯•",
    phase=RulePhase.EXECUTION
)
```

#### è¯­ä¹‰é©±åŠ¨çš„æ¡ä»¶åŒ¹é…
- ä½¿ç”¨LLMè¿›è¡Œæ¡ä»¶è¯­ä¹‰ç†è§£ï¼Œè€Œéç®€å•å­—ç¬¦ä¸²åŒ¹é…
- æ”¯æŒå¤æ‚çš„ä¸šåŠ¡é€»è¾‘è¡¨è¾¾å’Œæ¨ç†
- è‡ªé€‚åº”çš„ç½®ä¿¡åº¦è¯„ä¼°å’Œè§£é‡Šç”Ÿæˆ

#### æ™ºèƒ½å¹¶è¡Œæ‰§è¡Œä¼˜åŒ–
- è§„åˆ™æ•°é‡ â‰¤ 5ï¼šä¸²è¡ŒåŒ¹é… (ä¼˜åŒ–å»¶è¿Ÿ)
- è§„åˆ™æ•°é‡ > 5ï¼šå¹¶è¡ŒåŒ¹é… (ä¼˜åŒ–ååé‡)
- æœ€å¤§æ”¯æŒ200ä¸ªå¹¶å‘è§„åˆ™åŒ¹é…
- æ™ºèƒ½çº¿ç¨‹æ± ç®¡ç†å’Œèµ„æºä¼˜åŒ–

### 11.3 ä¼ä¸šçº§ç‰¹æ€§

#### å®Œæ•´çš„DDDæ¶æ„
- **é¢†åŸŸå±‚**: çº¯ä¸šåŠ¡é€»è¾‘ï¼Œæ— æŠ€æœ¯ä¾èµ–
- **æœåŠ¡å±‚**: ä¸šåŠ¡ç”¨ä¾‹å®ç°å’Œåè°ƒ
- **åŸºç¡€è®¾æ–½å±‚**: æŠ€æœ¯å®ç°å’Œå¤–éƒ¨é›†æˆ
- **å¼•æ“å±‚**: å·¥ä½œæµæ‰§è¡Œå’Œæ§åˆ¶

#### ç”Ÿäº§å°±ç»ªçš„å·¥å‚å‡½æ•°
```python
# ä¸€è¡Œä»£ç åˆ›å»ºå®Œæ•´ç³»ç»Ÿ
workflow_engine = create_production_rule_system(
    llm=llm, agents=agents, enable_auto_recovery=True
)
```

#### å·¥ä¸šçº§é”™è¯¯å¤„ç†
- è‡ªåŠ¨é”™è¯¯æ£€æµ‹å’Œåˆ†ç±»
- æ™ºèƒ½æ¢å¤ç­–ç•¥ç”Ÿæˆ
- ä¼˜é›…é™çº§å’Œæ•…éšœè½¬ç§»
- å®Œæ•´çš„é”™è¯¯è¿½è¸ªå’ŒæŠ¥å‘Š

### 11.4 å¼€å‘è€…ä½“éªŒæå‡

#### é›¶å­¦ä¹ æˆæœ¬
- ä¿æŒç°æœ‰APIæ¥å£ä¸å˜
- é€‚é…å™¨æä¾›é€æ˜çš„å‡çº§è·¯å¾„
- è¯¦ç»†çš„è¿ç§»æŒ‡å—å’Œç¤ºä¾‹ä»£ç 

#### å¼ºå¤§çš„è°ƒè¯•èƒ½åŠ›
- å®Œæ•´çš„æ‰§è¡Œå†å²è¿½è¸ª
- è§„åˆ™åŒ¹é…è¿‡ç¨‹å¯è§†åŒ–
- è¯¦ç»†çš„æ€§èƒ½åˆ†ææŠ¥å‘Š
- æ™ºèƒ½çš„é”™è¯¯è¯Šæ–­å’Œå»ºè®®

#### ä¸°å¯Œçš„ç¤ºä¾‹å’Œæ–‡æ¡£
- basic_example.py: ç®€å•çš„Hello Worldç¨‹åº
- advanced_example.py: å¤æ‚çš„è®¡ç®—å™¨å¼€å‘æµç¨‹
- å®Œæ•´çš„APIæ–‡æ¡£å’Œä½¿ç”¨æŒ‡å—
- æœ€ä½³å®è·µå’Œè®¾è®¡æ¨¡å¼æŒ‡å¯¼

### 11.5 æœªæ¥å‘å±•æ–¹å‘
è®¤çŸ¥å·¥ä½œæµç³»ç»Ÿç°å·²å…·å¤‡ï¼š
- **å®Œæ•´çš„æŠ€æœ¯æ ˆ**: ä»æ¦‚å¿µåˆ°å®ç°çš„å…¨æ ˆè§£å†³æ–¹æ¡ˆ
- **ä¼ä¸šçº§æˆç†Ÿåº¦**: å¯ç›´æ¥ç”¨äºç”Ÿäº§ç¯å¢ƒçš„ç¨³å®šæ¶æ„
- **å¼ºå¤§çš„æ‰©å±•æ€§**: æ”¯æŒæœªæ¥åŠŸèƒ½å¢å¼ºå’Œå®šåˆ¶å¼€å‘
- **æ ‡å‡†åŒ–çš„æ¥å£**: ä¸ºAIå·¥ä½œæµé¢†åŸŸæä¾›å‚è€ƒå®ç°

æœ¬æ¬¡æ›´æ–°å°†ç³»ç»Ÿæå‡åˆ°äº†å·¥ä¸šçº§æ ‡å‡†ï¼Œä¸ºæ™ºèƒ½ä½“åä½œå’Œè®¤çŸ¥å·¥ä½œæµçš„å¤§è§„æ¨¡åº”ç”¨å¥ å®šäº†åšå®åŸºç¡€ã€‚ 